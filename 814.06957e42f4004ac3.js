"use strict";(self.webpackChunkethan_desktop=self.webpackChunkethan_desktop||[]).push([[814],{2814:(y,l,a)=>{a.r(l),a.d(l,{CalendarApp:()=>E,CalendarModule:()=>T});var r=a(5615),g=a(727),t=a(4650),s=a(9238),p=a(1859),C=a(4023),M=a(2485),d=a(6895),O=a(8805),P=a(6497),u=a(9593),m=a(2649),f=a(7345);const b=["eCalendar"];function h(o,i){1&o&&(t.TgZ(0,"div",26),t._uU(1,"\u4eca\u5929"),t.qZA())}function k(o,i){if(1&o){const n=t.EpF();t.TgZ(0,"div",27),t.NdJ("click",function(){t.CHM(n),t.oxw(2);const e=t.MAs(4);return t.KtG(e.switchToToday())}),t._uU(1,"\u8df3\u8f6c\u5230\u4eca\u5929"),t.qZA()}}function v(o,i){if(1&o){const n=t.EpF();t.TgZ(0,"div")(1,"i",29),t.NdJ("click",function(e){const w=t.CHM(n).$implicit,D=t.oxw(3);return e.stopPropagation(),t.KtG(D.changeStatus(w))}),t.qZA(),t.TgZ(2,"div",23)(3,"div",24),t._uU(4),t.qZA(),t.TgZ(5,"div",10),t._uU(6),t.ALo(7,"dateFixer"),t.qZA()()()}if(2&o){const n=i.$implicit;t.Gre("to-do-item flex-row align-center mb-sm p-sm status-",n.status,""),t.xp6(1),t.Q6J("icon","default"==n.status?"circle":"check_circle"),t.xp6(3),t.Oqu(n.title),t.xp6(2),t.Oqu(t.xi3(7,6,n.date,"HH:mm"))}}function A(o,i){if(1&o&&(t.ynx(0),t.YNc(1,v,8,9,"div",28),t.BQk()),2&o){const n=t.oxw(2),c=t.MAs(4);t.xp6(1),t.Q6J("ngForOf",n.todoList[c.activatedDate.timestamp])}}function x(o,i){if(1&o){const n=t.EpF();t.TgZ(0,"div",5)(1,"div",6)(2,"div",7)(3,"button",8),t.NdJ("click",function(){t.CHM(n),t.oxw();const e=t.MAs(4);return t.KtG(e.prevMonth())}),t._UZ(4,"i",9),t.qZA(),t.TgZ(5,"h3",10)(6,"b"),t._uU(7),t.ALo(8,"dateFixer"),t.qZA()(),t.TgZ(9,"button",8),t.NdJ("click",function(){t.CHM(n),t.oxw();const e=t.MAs(4);return t.KtG(e.nextMonth())}),t._UZ(10,"i",11),t.qZA()(),t.TgZ(11,"div",12)(12,"b",13),t._uU(13),t.ALo(14,"dateFixer"),t.qZA(),t.TgZ(15,"b",14),t._uU(16),t.qZA(),t._UZ(17,"e-divider",15),t.TgZ(18,"div",16),t._uU(19),t.qZA()(),t.YNc(20,h,2,0,"div",17),t.YNc(21,k,2,0,"ng-template",null,18,t.W1O),t.TgZ(23,"div",19),t.NdJ("mouseup",function(e){t.CHM(n);const _=t.oxw();return t.KtG(_.onToDoMouseUp(e))}),t.TgZ(24,"h3",20)(25,"b"),t._uU(26,"\u5f85\u529e\u4e8b\u9879"),t.qZA()(),t.TgZ(27,"div",21),t.NdJ("click",function(){t.CHM(n);const e=t.oxw();return t.KtG(e.addToDo())}),t._UZ(28,"i",22),t.TgZ(29,"div",23)(30,"div",24),t._uU(31,"\u65b0\u589e\u5f85\u529e\u4e8b\u9879"),t.qZA()()(),t.YNc(32,A,2,1,"ng-container",25),t.qZA()()()}if(2&o){const n=t.MAs(22),c=t.oxw(),e=t.MAs(4);t.xp6(7),t.Oqu(t.xi3(8,9,e.activatedDate.date,"yyyy-MM")),t.xp6(6),t.Oqu(t.xi3(14,12,e.activatedDate.date,"dd")),t.xp6(3),t.Oqu(c.weekList[e.activatedDate.week-1].label),t.xp6(3),t.lnq("",e.activatedDate.lunar[0],"\u5e74",e.activatedDate.lunar[1],"\u6708",e.activatedDate.lunar[2],""),t.xp6(1),t.Q6J("ngIf",e.activatedDate.timestamp==e.todayTimestamp)("ngIfElse",n),t.xp6(12),t.Q6J("ngIf",c.todoList[e.activatedDate.timestamp])}}let E=(()=>{class o{constructor(n,c,e,_){this.EAS=n,this.todoSrv=c,this.configSrv=e,this.EMS=_,this.menu=[{name:"\u65e5\u5386",children:[]}],this.titleBarConfig={showBorder:!1},this.weekList=this.configSrv.VARIABLES.weekList,this.subscription=new g.w0,this.EAS.setAppActionBarMenu("calendar",this.menu)}ngOnInit(){this.getToDoList()}ngAfterViewInit(){this.subscription.add(this.EAS.eAppStatusChange.subscribe(n=>{"calendar"==n.id&&this.getToDoList()}))}ngOnDestroy(){this.subscription.unsubscribe()}getToDoList(){this.todoSrv.getToDoList().subscribe(n=>{this.todoList=n.data})}addToDo(){this.EAS.launch("toDo",{event:"add",data:{date:this.eCalendar.activatedDate.date}})}changeStatus(n){this.todoSrv.updateToDo({id:n.id,status:"checked"==n.status?"default":"checked"}).subscribe(_=>{this.todoList=_.data})}onToDoMouseUp(n){2==n.button&&this.EMS.create({menu:[{name:"\u524d\u5f80\u5f85\u529e\u4e8b\u9879App",click:()=>{this.EAS.launch("toDo")}}]},[n.x,n.y])}}return o.\u0275fac=function(n){return new(n||o)(t.Y36(s.y),t.Y36(p.Z),t.Y36(C.E),t.Y36(M.d))},o.\u0275cmp=t.Xpm({type:o,selectors:[["ng-component"]],viewQuery:function(n,c){if(1&n&&t.Gf(b,5),2&n){let e;t.iGM(e=t.CRH())&&(c.eCalendar=e.first)}},decls:5,vars:2,consts:[[3,"titleBarConfig"],[1,"calendar","flex-row"],["class","detail-block p-sm",4,"ngIf"],[3,"change"],["eCalendar",""],[1,"detail-block","p-sm"],[1,"detail-wrapper","full-parent","flex-column","align-center","py-lg","px-md"],[1,"month-block","flex-row","justify-between","align-center","mb-lg"],[1,"month-switch-button","flex-row","align-center",3,"click"],["e-icon","","size","medium","icon","arrow_back_ios"],[1,"date"],["e-icon","","size","medium","icon","arrow_forward_ios"],[1,"day-block","flex-column","align-center","py-md","mb-md"],[1,"day","mb-sm"],[1,"week"],["color","white",2,"width","88%"],[1,"lunar"],["class","today-flag px-sm",4,"ngIf","ngIfElse"],["notToday",""],[1,"to-do-block",3,"mouseup"],[1,"to-do-title","mb-md"],[1,"to-do-item","flex-row","align-center","mb-sm","p-sm",3,"click"],["e-icon","","icon","add_circle_outline","size","small","type","outlined",1,"check-icon","mr-sm"],[1,"detail"],[1,"title"],[4,"ngIf"],[1,"today-flag","px-sm"],[1,"jump-today-button","px-sm","mb-lg",3,"click"],[3,"class",4,"ngFor","ngForOf"],["e-icon","","size","small","type","outlined",1,"check-icon","mr-sm",3,"icon","click"]],template:function(n,c){if(1&n&&(t.TgZ(0,"e-app",0)(1,"div",1),t.YNc(2,x,33,15,"div",2),t.TgZ(3,"e-calendar",3,4),t.NdJ("change",function(){return c.getToDoList()}),t.qZA()()()),2&n){const e=t.MAs(4);t.Q6J("titleBarConfig",c.titleBarConfig),t.xp6(2),t.Q6J("ngIf",e)}},dependencies:[d.sg,d.O5,O.T,P.X,u.S,m.l,f.T],styles:[".calendar[_ngcontent-%COMP%]{min-width:850px;overflow:auto}.calendar[_ngcontent-%COMP%]   .detail-block[_ngcontent-%COMP%]{width:200px;flex-shrink:0}.calendar[_ngcontent-%COMP%]   .detail-block[_ngcontent-%COMP%]   .detail-wrapper[_ngcontent-%COMP%]{color:inherit;background-color:#ef5a38;border-radius:6px}.calendar[_ngcontent-%COMP%]   .detail-block[_ngcontent-%COMP%]   .detail-wrapper[_ngcontent-%COMP%]   .month-block[_ngcontent-%COMP%]   .month-switch-button[_ngcontent-%COMP%]{transition:transform .2s}.calendar[_ngcontent-%COMP%]   .detail-block[_ngcontent-%COMP%]   .detail-wrapper[_ngcontent-%COMP%]   .month-block[_ngcontent-%COMP%]   .month-switch-button[_ngcontent-%COMP%]:hover{transform:scale(1.1)}.calendar[_ngcontent-%COMP%]   .detail-block[_ngcontent-%COMP%]   .detail-wrapper[_ngcontent-%COMP%]   .month-block[_ngcontent-%COMP%]   .month-switch-button[_ngcontent-%COMP%]:active{transform:scale(.9)}.calendar[_ngcontent-%COMP%]   .detail-block[_ngcontent-%COMP%]   .detail-wrapper[_ngcontent-%COMP%]   .month-block[_ngcontent-%COMP%]   .month-switch-button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#fff}.calendar[_ngcontent-%COMP%]   .detail-block[_ngcontent-%COMP%]   .detail-wrapper[_ngcontent-%COMP%]   .month-block[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%]{margin-right:4px}.calendar[_ngcontent-%COMP%]   .detail-block[_ngcontent-%COMP%]   .detail-wrapper[_ngcontent-%COMP%]   .month-block[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%]   b[_ngcontent-%COMP%]{color:#fff}.calendar[_ngcontent-%COMP%]   .detail-block[_ngcontent-%COMP%]   .detail-wrapper[_ngcontent-%COMP%]   .day-block[_ngcontent-%COMP%]{width:100%;background-color:#0000001a;border-radius:6px}.calendar[_ngcontent-%COMP%]   .detail-block[_ngcontent-%COMP%]   .detail-wrapper[_ngcontent-%COMP%]   .day-block[_ngcontent-%COMP%]   .day[_ngcontent-%COMP%]{font-size:60px;line-height:60px;color:#fff}.calendar[_ngcontent-%COMP%]   .detail-block[_ngcontent-%COMP%]   .detail-wrapper[_ngcontent-%COMP%]   .day-block[_ngcontent-%COMP%]   .week[_ngcontent-%COMP%]{color:#fff}.calendar[_ngcontent-%COMP%]   .detail-block[_ngcontent-%COMP%]   .detail-wrapper[_ngcontent-%COMP%]   .day-block[_ngcontent-%COMP%]   .lunar[_ngcontent-%COMP%]{color:#fff;font-size:12px}.calendar[_ngcontent-%COMP%]   .detail-block[_ngcontent-%COMP%]   .detail-wrapper[_ngcontent-%COMP%]   .today-flag[_ngcontent-%COMP%], .calendar[_ngcontent-%COMP%]   .detail-block[_ngcontent-%COMP%]   .detail-wrapper[_ngcontent-%COMP%]   .jump-today-button[_ngcontent-%COMP%]{background-color:#fff;color:#ef5a38;border-radius:20px;line-height:20px;font-size:12px}.calendar[_ngcontent-%COMP%]   .detail-block[_ngcontent-%COMP%]   .detail-wrapper[_ngcontent-%COMP%]   .today-flag[_ngcontent-%COMP%]{position:absolute;left:130px;top:80px;transform:rotate(18deg)}.calendar[_ngcontent-%COMP%]   .detail-block[_ngcontent-%COMP%]   .detail-wrapper[_ngcontent-%COMP%]   .to-do-block[_ngcontent-%COMP%]{width:100%;color:#fff}.calendar[_ngcontent-%COMP%]   .detail-block[_ngcontent-%COMP%]   .detail-wrapper[_ngcontent-%COMP%]   .to-do-block[_ngcontent-%COMP%]   .to-do-title[_ngcontent-%COMP%], .calendar[_ngcontent-%COMP%]   .detail-block[_ngcontent-%COMP%]   .detail-wrapper[_ngcontent-%COMP%]   .to-do-block[_ngcontent-%COMP%]   .to-do-title[_ngcontent-%COMP%]   b[_ngcontent-%COMP%]{color:inherit}.calendar[_ngcontent-%COMP%]   .detail-block[_ngcontent-%COMP%]   .detail-wrapper[_ngcontent-%COMP%]   .to-do-block[_ngcontent-%COMP%]   .to-do-item[_ngcontent-%COMP%]{color:inherit;border-radius:4px;background-color:#fff3;transition:background-color .2s}.calendar[_ngcontent-%COMP%]   .detail-block[_ngcontent-%COMP%]   .detail-wrapper[_ngcontent-%COMP%]   .to-do-block[_ngcontent-%COMP%]   .to-do-item[_ngcontent-%COMP%]:hover{background-color:#ffffff4d}.calendar[_ngcontent-%COMP%]   .detail-block[_ngcontent-%COMP%]   .detail-wrapper[_ngcontent-%COMP%]   .to-do-block[_ngcontent-%COMP%]   .to-do-item[_ngcontent-%COMP%]:active{background-color:#ffffff1a}.calendar[_ngcontent-%COMP%]   .detail-block[_ngcontent-%COMP%]   .detail-wrapper[_ngcontent-%COMP%]   .to-do-block[_ngcontent-%COMP%]   .to-do-item[_ngcontent-%COMP%]   .check-icon[_ngcontent-%COMP%], .calendar[_ngcontent-%COMP%]   .detail-block[_ngcontent-%COMP%]   .detail-wrapper[_ngcontent-%COMP%]   .to-do-block[_ngcontent-%COMP%]   .to-do-item[_ngcontent-%COMP%]   .detail[_ngcontent-%COMP%]{color:inherit}.calendar[_ngcontent-%COMP%]   .detail-block[_ngcontent-%COMP%]   .detail-wrapper[_ngcontent-%COMP%]   .to-do-block[_ngcontent-%COMP%]   .to-do-item[_ngcontent-%COMP%]   .detail[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%], .calendar[_ngcontent-%COMP%]   .detail-block[_ngcontent-%COMP%]   .detail-wrapper[_ngcontent-%COMP%]   .to-do-block[_ngcontent-%COMP%]   .to-do-item[_ngcontent-%COMP%]   .detail[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%]{color:inherit;font-size:12px}.calendar[_ngcontent-%COMP%]   .detail-block[_ngcontent-%COMP%]   .detail-wrapper[_ngcontent-%COMP%]   .to-do-block[_ngcontent-%COMP%]   .to-do-item.status-checked[_ngcontent-%COMP%]{opacity:.5}.calendar[_ngcontent-%COMP%]   .detail-block[_ngcontent-%COMP%]   .detail-wrapper[_ngcontent-%COMP%]   .to-do-block[_ngcontent-%COMP%]   .to-do-item.status-checked[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{text-decoration:line-through}"]}),o})(),T=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[r.m]}),o})()}}]);