"use strict";(self.webpackChunkethan_desktop=self.webpackChunkethan_desktop||[]).push([[258],{9258:(F,l,s)=>{s.r(l),s.d(l,{RunningAppsApp:()=>P,RunningAppsModule:()=>Q});var u=s(5615),n=s(4650),f=s(9238),r=s(6895),m=s(8805),d=s(5228),h=s(6497),C=s(707),_=s(1068);const A=function(e){return{bottom:e}};function x(e,i){if(1&e&&(n.TgZ(0,"div",3),n._UZ(1,"div",4),n.qZA()),2&e){const t=i.$implicit;n.Q6J("ngStyle",t.style),n.xp6(1),n.Q6J("ngStyle",n.VKq(2,A,t.yValue))}}const b=function(e,i,t){return{"justify-start":e,"justify-center":i,"justify-end":t}};function v(e,i){if(1&e&&(n.TgZ(0,"div",1),n.YNc(1,x,2,4,"div",2),n.qZA()),2&e){const t=n.oxw();n.Q6J("ngClass",n.kEZ(2,b,"start"==t.config.blockConfig.align,"center"==t.config.blockConfig.align,"end"==t.config.blockConfig.align)),n.xp6(1),n.Q6J("ngForOf",t.processedData)}}let g=(()=>{class e{constructor(){}ngOnInit(){}ngOnChanges(){this.processData(),this.setMaxYValue()}refresh(){this.setMaxYValue(),this.processData()}setMaxYValue(){if(this.config.blockConfig.maxYValue)return;let t=0;this.config.data.map(o=>{o.yValue>t&&(t=o.yValue)}),this.maxYValue=t}processData(){const t=this.config.blockConfig.maxYValue||this.maxYValue;let o=[];this.config.data.map(c=>{let a={height:100*c.yValue/t+"%"};o.push({...c,style:a})}),this.processedData=o}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=n.Xpm({type:e,selectors:[["e-chart-block"]],inputs:{config:"config"},features:[n.TTD],decls:1,vars:1,consts:[["class","e-chart-block full-parent flex-row align-end",3,"ngClass",4,"ngIf"],[1,"e-chart-block","full-parent","flex-row","align-end",3,"ngClass"],["class","data-item flex-column align-center",3,"ngStyle",4,"ngFor","ngForOf"],[1,"data-item","flex-column","align-center",3,"ngStyle"],[1,"dot",3,"ngStyle"]],template:function(t,o){1&t&&n.YNc(0,v,2,6,"div",0),2&t&&n.Q6J("ngIf",o.processedData)},dependencies:[r.mk,r.sg,r.O5,r.PC],styles:[".e-chart-block[_ngcontent-%COMP%]{border:solid #2682fa 1px;background-image:linear-gradient(90deg,rgba(38,130,250,.16) 1px,transparent 1px),linear-gradient(0,rgba(38,130,250,.16) 1px,transparent 1px);background-size:50px 50px,14px 14px;overflow:hidden}.e-chart-block.justify-center[_ngcontent-%COMP%]   .data-item[_ngcontent-%COMP%]{flex:1}.e-chart-block[_ngcontent-%COMP%]   .data-item[_ngcontent-%COMP%]{width:10px;flex-shrink:0;border-top:solid #2682fa 1px;position:relative;background-color:#2682fa33}.e-chart-block[_ngcontent-%COMP%]   .data-item[_ngcontent-%COMP%]:first-child{border-left:solid #2682fa 1px}"]}),e})();function y(e,i){if(1&e&&n._UZ(0,"e-chart-block",4,5),2&e){const t=n.oxw(2);n.Q6J("config",t.config)}}const k=function(e,i){return{width:e,height:i}};function Z(e,i){if(1&e&&(n.TgZ(0,"div",1,2),n.YNc(2,y,2,1,"e-chart-block",3),n.qZA()),2&e){const t=n.oxw();n.Q6J("ngSwitch",t.config.widget)("ngStyle",n.WLB(3,k,t.config.width,t.config.height)),n.xp6(2),n.Q6J("ngSwitchCase","block")}}let M=(()=>{class e{constructor(){this.defaultConfig={width:"100%",height:"300px",widget:"block",blockConfig:{align:"center"},data:[]}}ngOnInit(){}ngOnChanges(){this.processConfig()}refresh(){this.processConfig()}processConfig(){this.config&&(this.config={...this.defaultConfig,...this.config}),this.eChartChildren&&this.eChartChildren._results.map(t=>{t.refresh()})}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=n.Xpm({type:e,selectors:[["e-chart"]],viewQuery:function(t,o){if(1&t&&n.Gf(g,5),2&t){let c;n.iGM(c=n.CRH())&&(o.eChartChildren=c)}},inputs:{config:"config"},features:[n.TTD],decls:1,vars:1,consts:[["class","e-chart",3,"ngSwitch","ngStyle",4,"ngIf"],[1,"e-chart",3,"ngSwitch","ngStyle"],["eChart",""],[3,"config",4,"ngSwitchCase"],[3,"config"],["eChartLine",""]],template:function(t,o){1&t&&n.YNc(0,Z,3,6,"div",0),2&t&&n.Q6J("ngIf",o.config)},dependencies:[r.O5,r.PC,r.RF,r.n9,g]}),e})();const O=["eChart"];function T(e,i){if(1&e){const t=n.EpF();n.TgZ(0,"button",12),n.NdJ("click",function(){n.CHM(t);const c=n.oxw();return n.KtG(c.EAS.closeApp())}),n._uU(1," \u5168\u90e8\u5173\u95ed "),n.qZA()}}function E(e,i){1&e&&n._UZ(0,"e-empty",13)}function w(e,i){if(1&e){const t=n.EpF();n.TgZ(0,"div",14),n._UZ(1,"e-image",15),n.TgZ(2,"div",16),n._uU(3),n.qZA(),n.TgZ(4,"button",17),n.NdJ("click",function(){const a=n.CHM(t).$implicit,p=n.oxw();return n.KtG(p.EAS.closeApp(a.id))}),n._uU(5," \u5173\u95ed "),n.qZA()()}if(2&e){const t=i.$implicit;n.xp6(1),n.Q6J("src",t.icon)("border",!0),n.xp6(2),n.Oqu(t.name)}}function S(e,i){if(1&e){const t=n.EpF();n.TgZ(0,"div",14),n._UZ(1,"img",19),n.TgZ(2,"div",20)(3,"div",16),n._uU(4),n.qZA(),n.TgZ(5,"div",21),n._uU(6),n.qZA()(),n.TgZ(7,"button",17),n.NdJ("click",function(){const a=n.CHM(t).$implicit,p=n.oxw(2);return n.KtG(p.EAS.launch(a.id))}),n._uU(8," \u8fd0\u884c "),n.qZA()()}if(2&e){const t=i.$implicit;n.xp6(1),n.Q6J("src",t.icon,n.LSH),n.xp6(3),n.Oqu(t.name),n.xp6(2),n.hij("Key: ",t.id,"")}}function R(e,i){if(1&e&&(n.ynx(0),n._UZ(1,"e-divider"),n.TgZ(2,"div",18)(3,"div",3)(4,"b",4)(5,"h2"),n._uU(6,"\u672a\u8fd0\u884c"),n.qZA()()(),n.YNc(7,S,9,3,"div",10),n.qZA(),n.BQk()),2&e){const t=n.oxw();n.xp6(7),n.Q6J("ngForOf",t.closedApps)}}const J=function(){return{showBorder:!1}};let P=(()=>{class e{constructor(t){this.EAS=t,this.menu=[{name:"\u8fdb\u7a0b\u7ba1\u7406",children:[{name:"\u6700\u5c0f\u5316\u6240\u6709App",click:()=>{this.EAS.viewDesktop()}},{name:"\u5173\u95ed\u6240\u6709App",click:()=>{this.EAS.closeApp()}}]}],this.memoryChart={widget:"block",height:"112px",blockConfig:{align:"end"},data:[]},this.EAS.setAppActionBarMenu("runningApps",this.menu)}get runningApps(){return this.EAS.appsInArray.filter(t=>"closed"!=t.status&&"runningApps"!=t.id)}get closedApps(){return this.EAS.appsInArray.filter(t=>"closed"==t.status)}ngOnInit(){this.memoryRefreshInterval=setInterval(()=>{const{usedJSHeapSize:t,totalJSHeapSize:o}=window.performance.memory;this.memoryChart.blockConfig.maxYValue=this.bitToMege(o),this.memoryChart.data.push({xLabel:"",yValue:this.bitToMege(t)}),this.eChart.refresh()},1e3)}ngOnDestroy(){this.memoryRefreshInterval&&(clearInterval(this.memoryRefreshInterval),this.memoryRefreshInterval=null)}bitToMege(t){return t?Number((t/1e6).toFixed(4)):0}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(f.y))},e.\u0275cmp=n.Xpm({type:e,selectors:[["ng-component"]],viewQuery:function(t,o){if(1&t&&n.Gf(O,5),2&t){let c;n.iGM(c=n.CRH())&&(o.eChart=c.first)}},decls:19,vars:7,consts:[[3,"titleBarConfig"],[1,"running-apps","p-md"],[1,"memory-block","mb-lg"],[1,"title-block","flex-row","justify-between"],[1,"title","mb-md"],[3,"config"],["eChart",""],[1,"running-block","mb-lg"],["size","small","e-button","",3,"click",4,"ngIf"],["text","\u65e0\u6b63\u5728\u8fd0\u884c\u7684App",4,"ngIf"],["class","running-item flex-row align-center mb-md",4,"ngFor","ngForOf"],[4,"ngIf"],["size","small","e-button","",3,"click"],["text","\u65e0\u6b63\u5728\u8fd0\u884c\u7684App"],[1,"running-item","flex-row","align-center","mb-md"],["size","small","shape","square",1,"mr-md",3,"src","border"],[1,"name"],["size","small","e-button","",1,"button",3,"click"],[1,"closed-block"],[1,"icon","mr-md",3,"src"],[1,"name-block"],[1,"id"]],template:function(t,o){1&t&&(n.TgZ(0,"e-app",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"b",4)(5,"h2"),n._uU(6,"\u8d44\u6e90\u5360\u7528\u60c5\u51b5"),n.qZA()()(),n._UZ(7,"e-chart",5,6),n.qZA(),n._UZ(9,"e-divider"),n.TgZ(10,"div",7)(11,"div",3)(12,"b",4)(13,"h2"),n._uU(14,"\u6b63\u5728\u8fd0\u884c"),n.qZA()(),n.YNc(15,T,2,0,"button",8),n.qZA(),n.YNc(16,E,1,0,"e-empty",9),n.YNc(17,w,6,3,"div",10),n.qZA(),n.YNc(18,R,8,1,"ng-container",11),n.qZA()()),2&t&&(n.Q6J("titleBarConfig",n.DdM(6,J)),n.xp6(7),n.Q6J("config",o.memoryChart),n.xp6(8),n.Q6J("ngIf",o.runningApps.length),n.xp6(1),n.Q6J("ngIf",!o.runningApps.length),n.xp6(1),n.Q6J("ngForOf",o.runningApps),n.xp6(1),n.Q6J("ngIf",o.closedApps.length))},dependencies:[r.sg,r.O5,m.T,d.o,h.X,C.A,_.S,M],styles:[".running-apps[_ngcontent-%COMP%]   .running-item[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:56px;height:56px;border-radius:14px}.running-apps[_ngcontent-%COMP%]   .running-item[_ngcontent-%COMP%]   .name-block[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-size:16px;margin-bottom:2.6666666667px}.running-apps[_ngcontent-%COMP%]   .running-item[_ngcontent-%COMP%]   .name-block[_ngcontent-%COMP%]   .id[_ngcontent-%COMP%]{font-size:14px;opacity:.5}.running-apps[_ngcontent-%COMP%]   .running-item[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]{margin-left:auto}"]}),e})(),Q=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=n.oAB({type:e}),e.\u0275inj=n.cJS({imports:[u.m]}),e})()}}]);