"use strict";(self.webpackChunkethan_desktop=self.webpackChunkethan_desktop||[]).push([[674],{2674:(B,s,i)=>{i.r(s),i.d(s,{CalculatorApp:()=>N,CalculatorModule:()=>S});var g=i(5615),u=i(1977),t=i(4650),d=i(9238),m=i(2485),f=i(7169),p=i(6895),M=i(8805),O=i(9593);const P=["eApp"],x=function(o){return{"confirm-ac":o}};function y(o,c){if(1&o){const n=t.EpF();t.TgZ(0,"div")(1,"div",11),t.NdJ("click",function(){t.CHM(n);const l=t.oxw(2);return t.KtG(l.allClear(!0))}),t._uU(2),t.qZA(),t.TgZ(3,"div",12),t.NdJ("click",function(){t.CHM(n);const l=t.oxw(2);return t.KtG(l.clear())}),t._uU(4,"C"),t.qZA()()}if(2&o){const n=t.oxw().$implicit,e=t.oxw();t.MT6("button sub-button-block flex-column justify-center button-type-",n.type," button-",n.value,""),t.xp6(1),t.Q6J("ngClass",t.VKq(6,x,e.confirmAC)),t.xp6(1),t.Oqu(e.confirmAC?"\u6e05\u7a7a?":"AC")}}function v(o,c){if(1&o&&(t.TgZ(0,"div",16),t._uU(1),t.qZA()),2&o){const n=t.oxw(2).$implicit;t.xp6(1),t.Oqu(n.label)}}function k(o,c){if(1&o&&t._UZ(0,"i",17),2&o){const n=t.oxw(2).$implicit;t.Q6J("icon",n.icon)}}function w(o,c){if(1&o){const n=t.EpF();t.TgZ(0,"div",13),t.NdJ("click",function(){t.CHM(n);const l=t.oxw().$implicit,a=t.oxw();return t.KtG(a.onClick(l))}),t.YNc(1,v,2,1,"div",14),t.YNc(2,k,1,1,"i",15),t.qZA()}if(2&o){const n=t.oxw().$implicit;t.MT6("button flex-row align-center justify-center button-type-",n.type," button-",n.value,""),t.xp6(1),t.Q6J("ngIf",n.label),t.xp6(1),t.Q6J("ngIf",n.icon)}}function A(o,c){if(1&o&&(t.ynx(0),t.YNc(1,y,5,8,"div",9),t.YNc(2,w,3,6,"ng-template",null,10,t.W1O),t.BQk()),2&o){const n=c.$implicit,e=t.MAs(3);t.xp6(1),t.Q6J("ngIf","C"==n.label)("ngIfElse",e)}}let N=(()=>{class o{constructor(n,e,l){this.EAS=n,this.EMS=e,this.modalSrv=l,this.menu=[{name:"\u4e3b\u9898\u8bbe\u7f6e",children:[{name:"\u666e\u901a\u4e3b\u9898",click:()=>{this.theme="default",this.handleTitleBarColor("light")}},{name:"\u6309\u94ae\u7ffb\u8f6c",click:()=>{this.theme="reverse",this.handleTitleBarColor("light")}},{name:"\u6697\u9ed1\u4e3b\u9898",click:()=>{this.theme="dark",this.handleTitleBarColor("dark")}}]},{name:"\u5173\u4e8e",children:[{name:"\u5173\u4e8eNeumorphism\u8f7b\u62df\u7269\u8bbe\u8ba1",click:()=>{this.EAS.launch("hydrogenBrowser",{src:"http://www.woshipm.com/it/3775117.html"})}}]}],this.titleBarConfig={background:"#eaecf4"},this.theme="default",this.display=["0","",""],this.input="0",this.result=null,this.confirmAC=!1,this.buttonList=[{label:"C",type:"function",value:"clear"},{label:"\xf7",type:"function",value:"divided"},{label:"\xd7",type:"function",value:"times"},{label:"-",type:"function",value:"minus"},{label:"7",type:"number",value:"7"},{label:"8",type:"number",value:"8"},{label:"9",type:"number",value:"9"},{label:"+",type:"function",value:"plus"},{label:"4",type:"number",value:"4"},{label:"5",type:"number",value:"5"},{label:"6",type:"number",value:"6"},{label:"1",type:"number",value:"1"},{label:"2",type:"number",value:"2"},{label:"3",type:"number",value:"3"},{label:"=",type:"function",value:"equal"},{label:"0",type:"number",value:"0"},{label:".",type:"number",value:"."}],this.EAS.setAppActionBarMenu("calculator",this.menu)}ngOnInit(){}clear(){const n=this.display[1]?2:0;if(String(this.display[n]).length>1){let e=String(this.display[n]).substring(0,String(this.display[n]).length-1);this.display[n]=this.input=e}else this.display[n]=this.input="0";this.result=null,this.confirmAC=!1}allClear(n){!n||this.confirmAC?(this.confirmAC=!1,this.display=["0","",""],this.result=null,this.input="0"):this.confirmAC=!0}onClick(n){const e=this.display[1]?2:0;if("equal"!=n.value){if("number"==n.type){let l=`${this.display[e]}${n.value}`;if("."==n.value&&((0,u.QF)(this.display[e])||(l="0."),-1!=this.display[e].indexOf(".")))return;this.display[e]=this.input=this.formatValueInput(l)}else"function"==n.type&&(this.result?this.display[0]=this.input=String(this.result):(0,u.QF)(this.display[2])&&this.calculate(),this.display[1]=n.label);this.result=null,this.confirmAC=!1}else{if(!this.display[1]||!(0,u.QF)(this.display[2]))return;this.calculate()}}formatValueInput(n){return n.length>1&&"0"==n[0]&&-1==n.indexOf(".")&&(n=n.substring(1,n.length)),n}calculate(){switch(this.display[1]){case"\xf7":if(0==Number(this.display[2]))return void this.modalSrv.confirm({title:"\u8ba1\u7b97\u9519\u8bef",content:"0\u4e0d\u80fd\u505a\u9664\u6570",cancelText:"\u5173\u95ed",confirmText:"\u4e3a\u4ec0\u4e48\uff1f",confirmAction:()=>{this.EAS.launch("hydrogenBrowser",{src:"https://www.bilibili.com/video/BV1GJ411x7h7"})}});this.result=this.processResult(function h(o,c){var n=0,e=0;try{n=o.toString().split(".")[1].length}catch{}try{e=c.toString().split(".")[1].length}catch{}return Number(o.toString().replace(".",""))/Number(c.toString().replace(".",""))*Math.pow(10,e-n)}(Number(this.display[0]),Number(this.display[2])));break;case"\xd7":this.result=this.processResult(function _(o,c){var n=0,e=o.toString(),l=c.toString();try{n+=e.split(".")[1].length}catch{}try{n+=l.split(".")[1].length}catch{}return Number(e.replace(".",""))*Number(l.replace(".",""))/Math.pow(10,n)}(Number(this.display[0]),Number(this.display[2])));break;case"-":this.result=this.processResult(function C(o,c){var n,e,l;try{n=o.toString().split(".")[1].length}catch{n=0}try{e=c.toString().split(".")[1].length}catch{e=0}return l=Math.pow(10,Math.max(n,e)),Number(((o*l-c*l)/l).toFixed(n>=e?n:e))}(Number(this.display[0]),Number(this.display[2])));break;case"+":this.result=this.processResult(function b(o,c){var n,e,l,a;try{n=o.toString().split(".")[1].length}catch{n=0}try{e=c.toString().split(".")[1].length}catch{e=0}if(a=Math.abs(n-e),l=Math.pow(10,Math.max(n,e)),a>0){var r=Math.pow(10,a);n>e?(o=Number(o.toString().replace(".","")),c=Number(c.toString().replace(".",""))*r):(o=Number(o.toString().replace(".",""))*r,c=Number(c.toString().replace(".","")))}else o=Number(o.toString().replace(".","")),c=Number(c.toString().replace(".",""));return(o+c)/l}(Number(this.display[0]),Number(this.display[2])))}this.input=String(this.result),this.display=[this.input,"",""]}processResult(n){return Number(n.toFixed(10))}onMousedown(n){2==n.button&&this.EMS.create({menu:[{name:"\u6e05\u7a7a\u6240\u6709\u8ba1\u7b97",click:()=>{this.allClear()}}]},[n.x,n.y])}handleTitleBarColor(n){this.titleBarConfig.color="dark"==n?"white":"black",this.titleBarConfig.background="dark"==n?"#222323":"#eaecf4",this.eApp.refreshTitleBarConfig()}}return o.\u0275fac=function(n){return new(n||o)(t.Y36(d.y),t.Y36(m.d),t.Y36(f._))},o.\u0275cmp=t.Xpm({type:o,selectors:[["ng-component"]],viewQuery:function(n,e){if(1&n&&t.Gf(P,5),2&n){let l;t.iGM(l=t.CRH())&&(e.eApp=l.first)}},decls:12,vars:9,consts:[[3,"titleBarConfig","titleBarConfigChange"],["eApp",""],[3,"mouseup"],[1,"wrapper","full-parent","p-xl"],[1,"input-block","pt-xl","pb-xxl"],[1,"line","mb-sm"],[1,"result"],[1,"button-block"],[4,"ngFor","ngForOf"],[3,"class",4,"ngIf","ngIfElse"],["regular",""],[1,"sub-button","button-AC",3,"ngClass","click"],[1,"sub-button","button-C",3,"click"],[3,"click"],["class","label",4,"ngIf"],["class","icon","e-icon","",3,"icon",4,"ngIf"],[1,"label"],["e-icon","",1,"icon",3,"icon"]],template:function(n,e){1&n&&(t.TgZ(0,"e-app",0,1),t.NdJ("titleBarConfigChange",function(a){return e.titleBarConfig=a}),t.TgZ(2,"div",2),t.NdJ("mouseup",function(a){return e.onMousedown(a)}),t.TgZ(3,"div",3)(4,"div",4)(5,"div",5),t._uU(6),t.qZA(),t.TgZ(7,"h1",6)(8,"b"),t._uU(9),t.qZA()()(),t.TgZ(10,"div",7),t.YNc(11,A,4,2,"ng-container",8),t.qZA()()()()),2&n&&(t.Q6J("titleBarConfig",e.titleBarConfig),t.xp6(2),t.Gre("calculator flex-column justify-center align-center full-parent theme-",e.theme,""),t.xp6(4),t.lnq("",e.display[0],"",e.display[1],"",e.display[2],""),t.xp6(3),t.Oqu(e.result||e.input),t.xp6(2),t.Q6J("ngForOf",e.buttonList))},dependencies:[p.mk,p.sg,p.O5,M.T,O.S],styles:[".calculator[_ngcontent-%COMP%]{background-color:#eaecf4}.calculator[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]{max-width:354px;max-height:566px}.calculator[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .input-block[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]{opacity:.6}.calculator[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .input-block[_ngcontent-%COMP%]   .result[_ngcontent-%COMP%], .calculator[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .input-block[_ngcontent-%COMP%]   b[_ngcontent-%COMP%], .calculator[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .input-block[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]{text-align:right;overflow:hidden;text-overflow:ellipsis;max-width:100%;white-space:nowrap;box-sizing:border-box;word-break:break-all;display:block}.calculator[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .button-block[_ngcontent-%COMP%]{width:100%;display:grid;gap:24px;grid-template-columns:repeat(4,calc((100% - 72px)/4));grid-template-rows:repeat(5,54px)}.calculator[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .button-block[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]{position:relative;box-shadow:2px 2px 12px #00000029,-2px -2px 4px 2px #fff;border-radius:16px}.calculator[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .button-block[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-size:16px;line-height:16px}.calculator[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .button-block[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]:active{box-shadow:2px 2px 6px #00000014 inset,-2px -2px 4px 2px #fff9 inset}.calculator[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .button-block[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]:active   .label[_ngcontent-%COMP%], .calculator[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .button-block[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]:active   .sub-button[_ngcontent-%COMP%]{transform:translate(1px,1px)}.calculator[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .button-block[_ngcontent-%COMP%]   .button.button-type-function[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{transform:translate(-1px,-1px)}.calculator[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .button-block[_ngcontent-%COMP%]   .button.button-type-function[_ngcontent-%COMP%]:active   .label[_ngcontent-%COMP%]{transform:translate(0)}.calculator[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .button-block[_ngcontent-%COMP%]   .button.button-plus[_ngcontent-%COMP%]{grid-column-start:4;grid-column-end:5;grid-row-start:2;grid-row-end:4}.calculator[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .button-block[_ngcontent-%COMP%]   .button.button-0[_ngcontent-%COMP%]{grid-column-start:1;grid-column-end:3;grid-row-start:5;grid-row-end:6}.calculator[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .button-block[_ngcontent-%COMP%]   .button.button-equal[_ngcontent-%COMP%]{grid-column-start:4;grid-column-end:5;grid-row-start:4;grid-row-end:6;background-color:#ffc400}.calculator[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .button-block[_ngcontent-%COMP%]   .button.sub-button-block[_ngcontent-%COMP%]{padding:2px 4px 0;overflow:hidden}.calculator[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .button-block[_ngcontent-%COMP%]   .button.sub-button-block[_ngcontent-%COMP%]   .sub-button[_ngcontent-%COMP%]{padding-left:12px;border-radius:14px 14px 6px 6px}.calculator[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .button-block[_ngcontent-%COMP%]   .button.sub-button-block[_ngcontent-%COMP%]   .sub-button.button-AC[_ngcontent-%COMP%]{line-height:24px;font-size:12px;flex-shrink:0;background-color:#ffc400}.calculator[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .button-block[_ngcontent-%COMP%]   .button.sub-button-block[_ngcontent-%COMP%]   .sub-button.button-AC.confirm-ac[_ngcontent-%COMP%]{padding-left:9px;color:#fff;background-color:#de350b}.calculator[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .button-block[_ngcontent-%COMP%]   .button.sub-button-block[_ngcontent-%COMP%]   .sub-button.button-C[_ngcontent-%COMP%]{height:100%;line-height:24px}.calculator.theme-reverse[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]{box-shadow:2px 2px 12px #00000029 inset,-2px -2px 4px 2px #fff inset!important}.calculator.theme-dark[_ngcontent-%COMP%]{background-color:#222323!important}.calculator.theme-dark[_ngcontent-%COMP%]   .result[_ngcontent-%COMP%], .calculator.theme-dark[_ngcontent-%COMP%]   b[_ngcontent-%COMP%], .calculator.theme-dark[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]{color:#fff!important}.calculator.theme-dark[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]{box-shadow:2px 2px 12px #000,-2px -2px 4px 2px #fff3!important}.calculator.theme-dark[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{color:#fff!important}.calculator.theme-dark[_ngcontent-%COMP%]   .button.button-equal[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{color:#42526e!important}.calculator.theme-dark[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]   .sub-button[_ngcontent-%COMP%]{color:#fff!important}.calculator.theme-dark[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]   .sub-button.button-AC[_ngcontent-%COMP%]{color:#42526e!important}.calculator.theme-dark[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]   .sub-button.confirm-ac[_ngcontent-%COMP%]{color:#fff!important}.calculator.theme-dark[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]:active{box-shadow:2px 2px 12px #000000b3 inset,-2px -2px 4px 2px #ffffff1a inset!important}"]}),o})(),S=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[g.m]}),o})()}}]);